(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d226c7f"],{e9b7:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-table",{attrs:{data:e.userList}},[s("el-table-column",{attrs:{label:"用户名",prop:"userName"}}),s("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-image",{staticStyle:{width:"100px"},attrs:{src:e.row.avatar,fit:"fill"}})]}}])}),s("el-table-column",{attrs:{label:"简介",prop:"description"}}),s("el-table-column",{attrs:{label:"是否冻结账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-switch",{attrs:{value:!t.row.approved},on:{change:function(s){return e.switchApproved(t.row)}}})]}}])}),s("el-table-column",{attrs:{label:"是否为管理员"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-switch",{on:{change:function(s){return e.switchAdmin(t.row)}},model:{value:t.row.isAdmin,callback:function(s){e.$set(t.row,"isAdmin",s)},expression:"scope.row.isAdmin"}})]}}])}),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"danger"},on:{click:function(s){return e.rejectedUser(t.row)}}},[e._v("删除")])]}}])})],1),s("div",[s("el-pagination",{attrs:{layout:"prev,pager,next",total:e.userTotalNum,"page-size":e.searchUserParams.limit},on:{"current-change":e.handleUserCurrentChange}})],1)],1)},a=[],r=s("534f"),i={name:"DBManager",data:function(){return{searchUserParams:{limit:10,offset:0},userList:[],userTotalNum:0}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;r["a"].getAllUser(this.searchUserParams).then((function(t){e.userList=t.data.data.userList,e.userTotalNum=t.data.data.userTotalNum}))},rejectedUser:function(e){var t=this;r["a"].deleteUser({key:e.key}).then((function(e){console.log(e),200===e.data.status&&t.getUserList()}))},handleUserCurrentChange:function(e){this.searchUserParams.offset=(e-1)*this.searchUserParams.limit,this.getUserList()},switchAdmin:function(e){var t=this;this.$confirm("此操作将改变此用户的权限, 后续影响极大, 请问是否继续?","警告",{confirmButtonText:"我心已决",cancelButtonText:"取消",type:"warning"}).then((function(){e.isAdmin?r["a"].setAdmin({key:e.key}).then((function(e){200===e.data.status&&t.$message.success("已为该用户开启管理员权限")})):r["a"].unsetAdmin({key:e.key}).then((function(e){200===e.data.status&&t.$message.success("已关闭该用户已管理员权限")}))})).catch((function(){e.isAdmin=!1,t.$message({type:"info",message:"取消操作"})}))},switchApproved:function(e){var t=this;this.$confirm("此操作将改变此用户的权限, 后续影响极大, 请问是否继续?","警告",{confirmButtonText:"我心已决",cancelButtonText:"取消",type:"warning"}).then((function(){e.approved?r["a"].unApprovedUser({key:e.key}).then((function(s){200===s.data.status&&(e.approved=!e.approved,t.$message.success("已冻结该用户"))})):r["a"].approvedUser({key:e.key}).then((function(s){200===s.data.status&&(e.approved=!e.approved,t.$message.success("已解冻结该用户"))}))})).catch((function(){t.$message({type:"info",message:"取消操作"})}))}}},o=i,c=s("2877"),u=Object(c["a"])(o,n,a,!1,null,null,null);t["default"]=u.exports}}]);